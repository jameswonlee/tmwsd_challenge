doctype html
html
    head 
        title Message Incinerator: Self-Destructing Messages
        meta(name="viewport" content="width=device-width, initial-scale=0.75")
        link(rel="stylesheet" href="/index.css")
        link(rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css")
        script.  
            function validateForm() {
                const text = document.querySelector('textarea[name="message"]');
                if (text.value.trim() === "") {
                    alert('Please enter a message before submitting')
                    return false;
                }
                return true;
            }

            function toggleDarkMode() {
                const body = document.body;
                const button = document.getElementById('dark-mode-toggle');
                body.classList.toggle('dark-mode');

                if (body.classList.contains('dark-mode')) {
                    localStorage.setItem('dark-mode', 'true');
                    button.textContent = 'Light Mode';
                    button.style.backgroundColor = 'rgb(200, 200, 200)';
                    button.style.color = 'black';
                } else {
                    localStorage.setItem('dark-mode', 'false');
                    button.textContent = 'Dark Mode';
                    button.style.backgroundColor = 'rgb(67, 67, 187)';
                    button.style.color = 'white';
                }
            }

            window.onload = function() {
                const body = document.body;
                const button = document.getElementById('dark-mode-toggle');
                if (localStorage.getItem('dark-mode') === 'true') {
                    body.classList.add('dark-mode');
                    button.textContent = 'Light Mode';
                    button.style.backgroundColor = 'rgb(200, 200, 200)';
                    button.style.color = 'black';
                } else {
                    button.textContent = 'Dark Mode';
                    button.style.backgroundColor = 'rgb(67, 67, 187)';
                    button.style.color = 'white';
                }
            }

    body
        div.outer-container
            button.dark-mode-button(onclick="toggleDarkMode()") Toggle Dark Mode
            img(src="/logo.svg" alt="Website Logo" class="logo")
            div.form-container
                form(action="/create" method="POST" onSubmit="return validateForm()")
                    div.text-area-container
                        textarea.message-text-area(name="message")
                        button.submit-btn(type="submit") Save Message
                div.messages-container
                    h2.messages-header My saved messages
                    if messages && messages.length == 1
                        h3.messages-count You have #{messages.length} unread message
                    else if messages
                        h3.messages-count You have #{messages.length} unread messages
                    else
                        h3.messages-count You have 0 unread messages
                    ul.messages
                    each message in messages || []
                        div.message-link
                            a(href=`/message/${message.id}`).message-link-font
                                i.fa-regular.fa-envelope
                                |  #{dayjs(message.timestamp).format('MMM-DD-YY h:mm:ssa')}
